!function o(r,l,d){function s(t,e){if(!l[t]){if(!r[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(c)return c(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var a=l[t]={exports:{}};r[t][0].call(a.exports,function(e){return s(r[t][1][e]||e)},a,a.exports,o,r,l,d)}return l[t].exports}for(var c="function"==typeof require&&require,e=0;e<d.length;e++)s(d[e]);return s}({1:[function(t,e,i){"use strict";function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function n(e){if(e&&e.__esModule)return e;var t=r();if(t&&t.has(e))return t.get(e);var i={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}}return i.default=e,t&&t.set(e,i),i}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.registerMetaboxes()}return function(e,t,i){t&&a(e.prototype,t),i&&a(e,i)}(e,[{key:"registerMetaboxes",value:function(){Promise.resolve().then(function(){return n(t("./metaboxes/form"))}).then(function(e){new e.default(jQuery)}),Promise.resolve().then(function(){return n(t("./metaboxes/mailchimp"))}).then(function(e){new e.default(jQuery)}),Promise.resolve().then(function(){return n(t("./metaboxes/webhook"))}).then(function(e){new e.default(jQuery)})}}]),e}())},{"./metaboxes/form":3,"./metaboxes/mailchimp":4,"./metaboxes/webhook":5}],2:[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=function(){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.$=e,this.el={$metabox:t,$errors:t.find(".cf7k-metabox-errors")},this.data={errors:{}},this.el.$metabox.on("insertError",this.insertError.bind(this)),this.el.$metabox.on("removeError",this.removeError.bind(this))}return function(e,t,i){t&&n(e.prototype,t),i&&n(e,i)}(i,[{key:"insertError",value:function(e,t){t&&(this.data.errors[t.id]=t.text),this.renderError()}},{key:"removeError",value:function(e,t){t&&delete this.data.errors[t.id],this.renderError()}},{key:"renderError",value:function(){if(this.data.errors&&0===Object.keys(this.data.errors).length)this.el.$errors.addClass("hidden");else{for(var e in this.el.$errors.find("ul").html(""),this.data.errors)this.el.$errors.find("ul").append("<li>".concat(this.data.errors[e],"</li>"));this.el.$errors.removeClass("hidden")}}}]),i}();i.default=a},{}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,a=(n=e("./base"))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(){function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l(this,d(i).call(this,e,e("#cf7k_general_settings_metabox")))).$cf7Id=t.$('select[name="cf7_id"]'),t.$metabox=t.$(".cf7k-cpt-metabox"),t.integrations=["slack","mailchimp","webhook"],t.initIntegrations(),t.bindEvents(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,a["default"]),function(e,t,i){t&&r(e.prototype,t),i&&r(e,i)}(i,[{key:"bindEvents",value:function(){var t=this;this.$(".cf7k-color-picker-field").wpColorPicker(),this.$(".js-cf7k-integrations").change(function(){var e=t.$(this).val();e=e||[],t.integrationsVisibility(e)}),this.$(".js-cf7k-integrations").on("select2:select",function(e){var t=e.params.data;setTimeout(function(){document.getElementById("cf7k_"+t.id+"_integration_metabox").scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},500)})}},{key:"initIntegrations",value:function(){var e=this.$(".js-cf7k-integrations");e.select2({placeholder:"Select Integration"}),0<this.$cf7Id.length&&(this.$metabox.find(".integrations-row").removeClass("hidden"),this.integrationsVisibility(e.val()||[]))}},{key:"integrationsVisibility",value:function(e){for(var t=0;t<this.integrations.length;t++){var i=this.integrations[t];0<=e.indexOf(i)?this.$("#cf7k_"+i+"_integration_metabox").show():this.$("#cf7k_"+i+"_integration_metabox").hide()}}}]),i}();i.default=c},{"./base":2}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,a=(n=e("./base"))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(){function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l(this,d(i).call(this,e,e("#cf7k_mailchimp_integration_metabox")))).setElements(),t.setData(),t.bindEvents(),t.run(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,a["default"]),function(e,t,i){t&&r(e.prototype,t),i&&r(e,i)}(i,[{key:"setData",value:function(){this.data=this.$.extend(!0,this.data,{i18n:window.cf7k_admin,apiKey:"",formFields:[],mergeFields:[],fieldMapping:[],mergeFieldsLoaded:!1,formFieldsLoaded:!1}),0<this.el.$apiKey.length&&(this.data.apiKey=this.el.$apiKey.val().trim())}},{key:"setElements",value:function(){this.el=this.$.extend(this.el,{$apiKey:this.el.$metabox.find('input[name="mailchimp[api_key]"]'),$audience:this.el.$metabox.find('select[name="mailchimp[audience]"]'),$groups:this.el.$metabox.find('select[name="mailchimp[groups][]"]'),$doubleOptin:this.el.$metabox.find('input[name="mailchimp[double_optin]"]'),$fieldMapping:this.el.$metabox.find('input[name="mailchimp[field_mapping]"]'),$addFieldMap:this.el.$metabox.find(".cf7k-cpt-metabox-mailchimp-field-mapping-add button"),$cf7Id:this.$('select[name="cf7_id"]')})}},{key:"bindEvents",value:function(){var t=this;this.el.$apiKey.blur(function(e){return t.onApiKeyChange(e)}),this.el.$apiKey.keyup(function(e){return t.onApiKeyChange(e)}),this.el.$audience.change(function(e){return t.onAudienceChange(e)}),this.el.$cf7Id.change(function(e){return t.createFieldMapping()}),this.el.$addFieldMap.click(function(e){return t.addFieldMap()}),this.el.$metabox.on("change",".cf7k-cpt-metabox-mailchimp-field-mapping-form-field",function(e){return t.onFieldMapChange(e,"form_field")}),this.el.$metabox.on("change",".cf7k-cpt-metabox-mailchimp-field-mapping-merge-field",function(e){return t.onFieldMapChange(e,"merge_field")}),this.el.$metabox.on("click",".cf7k-cpt-metabox-mailchimp-field-mapping-row-delete i",function(e){return t.deleteFieldMap(e)})}},{key:"run",value:function(){this.data.apiKey&&this.getAudience()}},{key:"onApiKeyChange",value:function(e){var t=e.target.value;t&&t.trim()&&t!==this.data.apiKey&&(this.data.apiKey=t,this.resetAudience(),this.getAudience())}},{key:"onAudienceChange",value:function(e){this.resetAudienceGroups(),this.resetDoubleOptin(),this.resetFieldMapping(),e.target.value&&(this.getAudienceGroups(),this.getAudienceFields(),this.getFormFields(),this.el.$metabox.find(".cf7k-cpt-metabox-mailchimp-field-mapping-row").removeClass("hidden"),this.el.$doubleOptin.closest("tr").removeClass("hidden"))}},{key:"getAudience",value:function(){var t=this;this.el.$audience.closest("tr").removeClass("hidden"),this.el.$audience.siblings("i").removeClass("hidden"),window.wp.ajax.post("cf7k_mailchimp_get_audience",{api_key:this.data.apiKey,_ajax_nonce:this.data.i18n.mailchimp.get_audience_nonce}).done(function(e){t.insertAudience(e.lists)})}},{key:"getAudienceGroups",value:function(){var t=this;this.el.$groups.select2({placeholder:"Select Group"}),this.el.$groups.closest("tr").find(".cf7k-spin").removeClass("hidden"),this.el.$groups.closest("tr").removeClass("hidden"),window.wp.ajax.post("cf7k_mailchimp_get_audience_groups",{api_key:this.data.apiKey,list_id:this.el.$audience.val(),_ajax_nonce:this.data.i18n.mailchimp.get_audience_groups_nonce}).done(function(e){t.insertAudienceGroups(e)})}},{key:"getAudienceFields",value:function(){var t=this;window.wp.ajax.post("cf7k_mailchimp_get_audience_fields",{api_key:this.data.apiKey,list_id:this.el.$audience.val(),_ajax_nonce:this.data.i18n.mailchimp.get_audience_fields_nonce}).done(function(e){t.data.mergeFieldsLoaded=!0,t.data.mergeFields=e||[],t.initFieldMapping()})}},{key:"getFormFields",value:function(){var t=this,e=this.el.$cf7Id.val();e&&window.wp.ajax.post("cf7k_get_cf7_fields",{id:e}).done(function(e){t.data.formFieldsLoaded=!0,t.data.formFields=e||[],t.initFieldMapping()})}},{key:"resetAudience",value:function(){this.el.$audience.html('<option value="">- None -</option'),this.el.$audience.data("value",""),this.resetAudienceGroups(),this.resetDoubleOptin(),this.resetFieldMapping()}},{key:"resetAudienceGroups",value:function(){this.el.$metabox.find(".cf7k-cpt-metabox-mailchimp-groups-row").addClass("hidden"),this.el.$groups.html('<option value="">- None -</option'),this.el.$groups.data("value","")}},{key:"resetDoubleOptin",value:function(){this.el.$metabox.find(".cf7k-cpt-metabox-mailchimp-double-optin-row").addClass("hidden"),this.el.$doubleOptin.prop("checked",!1)}},{key:"resetFieldMapping",value:function(){this.mergeFields=[],this.formFields=[],this.data.mergeFieldsLoaded=!1,this.data.formFieldsLoaded=!1,this.data.fieldMapping=[],this.el.$fieldMapping.val("[]"),this.el.$metabox.find(".cf7k-cpt-metabox-mailchimp-field-mapping-row").addClass("hidden"),this.$(".cf7k-cpt-metabox-mailchimp-field-mapping").html("")}},{key:"insertAudience",value:function(e){var t="",i=this.el.$audience.data("value"),n=!0,a=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var d=r.value;t+='<option value="'.concat(d.id,'" ').concat(i===d.id?"selected":"","> ").concat(d.name,"</option>")}}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}this.el.$audience.append(t),this.el.$audience.siblings("i").addClass("hidden"),i&&(this.el.$metabox.find(".cf7k-cpt-metabox-mailchimp-groups-row").removeClass("hidden"),this.el.$metabox.find(".cf7k-cpt-metabox-mailchimp-double-optin-row").removeClass("hidden"),this.el.$metabox.find(".cf7k-cpt-metabox-mailchimp-field-mapping-row").removeClass("hidden"),this.getAudienceGroups(),this.getAudienceFields(),this.getFormFields())}},{key:"insertAudienceGroups",value:function(e){var t="",i=this.el.$groups.data("value")||[];for(var n in e)t+='<option value="'.concat(n,'" ').concat(0<=i.indexOf(n)?"selected":"","> ").concat(e[n],"</option>");this.el.$groups.html(t),this.el.$groups.closest("tr").find(".cf7k-spin").addClass("hidden"),this.el.$groups.select2({placeholder:"Select Group"})}},{key:"insertAudienceFields",value:function(e){var t="cf7k-cpt-metabox-mailchimp-field-mapping",i="",n=!0,a=!1,o=void 0;try{for(var r,l=this.data.mergeFields[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var d=r.value;i+='<option value="'.concat(d.remote_tag,'"> ').concat(d.remote_tag,"</option>")}}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}this.$(".".concat(t,' > div[data-id="').concat(e,'"]')).find(".".concat(t,"-merge-field select")).append(i)}},{key:"insertFormFields",value:function(e){var t="cf7k-cpt-metabox-mailchimp-field-mapping",i="",n=!0,a=!1,o=void 0;try{for(var r,l=this.data.formFields[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var d=r.value;i+='<option value="'.concat(d.name,'"> ').concat(d.name,"</option>")}}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}this.$(".".concat(t,' > div[data-id="').concat(e,'"]')).find(".".concat(t,"-form-field select")).append(i)}},{key:"addFieldMap",value:function(e){var t="cf7k-cpt-metabox-mailchimp-field-mapping",i=this.$("."+t),n=-1;if(e)n=e.id;else{var a=!0,o=!1,r=void 0;try{for(var l,d=this.data.fieldMapping[Symbol.iterator]();!(a=(l=d.next()).done);a=!0){var s=l.value;n<s.id&&(n=s.id)}}catch(e){o=!0,r=e}finally{try{a||null==d.return||d.return()}finally{if(o)throw r}}n+=1}var c='\n      <div class="'.concat(t,'-row" data-id="').concat(n,'">\n        <div class="').concat(t,'-form-field"><select><option value="">- None -</option></select></div>\n        <div class="').concat(t,'-merge-field"><select><option value="">- None -</option></select></div>\n        <div class="').concat(t,'-row-delete"><i class="dashicons dashicons-trash"></i></div>\n      </div>');i.append(c),this.insertFormFields(n),this.insertAudienceFields(n),this.data.fieldMapping.push(e||{id:n,merge_field:"",form_field:""}),this.el.$fieldMapping.val(JSON.stringify(this.data.fieldMapping)),this.validateFieldMapping()}},{key:"deleteFieldMap",value:function(e){var t=this.$(e.target).closest(".cf7k-cpt-metabox-mailchimp-field-mapping-row"),i=t.data("id");this.data.fieldMapping=_.without(this.data.fieldMapping,_.findWhere(this.data.fieldMapping,{id:i})),t.remove(),0===this.data.fieldMapping.length&&this.el.$metabox.trigger("insertError",{id:"fieldMapping",text:this.data.i18n.mailchimp.email_field_mapping}),this.el.$fieldMapping.val(JSON.stringify(this.data.fieldMapping)),this.validateFieldMapping()}},{key:"onFieldMapChange",value:function(e,t){var i=this.$(e.target).closest(".cf7k-cpt-metabox-mailchimp-field-mapping-row").data("id");_.find(this.data.fieldMapping,{id:i})[t]=e.target.value,this.el.$fieldMapping.val(JSON.stringify(this.data.fieldMapping)),this.validateFieldMapping()}},{key:"initFieldMapping",value:function(){if(this.data.formFieldsLoaded&&this.data.mergeFieldsLoaded){this.$(".cf7k-cpt-metabox-mailchimp-field-mapping-row i.cf7k-spin").addClass("hidden").siblings("*").removeClass("hidden");var e="cf7k-cpt-metabox-mailchimp-field-mapping",t=JSON.parse(this.el.$fieldMapping.val()||"[]"),i=!0,n=!1,a=void 0;try{for(var o,r=t[Symbol.iterator]();!(i=(o=r.next()).done);i=!0){var l=o.value;this.addFieldMap(l),this.$(".".concat(e,' > div[data-id="').concat(l.id,'"]')).find(".".concat(e,"-merge-field select")).val(l.merge_field),this.$(".".concat(e,' > div[data-id="').concat(l.id,'"]')).find(".".concat(e,"-form-field select")).val(l.form_field)}}catch(e){n=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(n)throw a}}this.validateFieldMapping()}}},{key:"validateFieldMapping",value:function(){var e=!(0===this.data.fieldMapping.length);(e=e&&_.findWhere(this.data.fieldMapping,{merge_field:"EMAIL"}))?this.el.$metabox.trigger("removeError",{id:"fieldMapping"}):this.el.$metabox.trigger("insertError",{id:"fieldMapping",text:this.data.i18n.mailchimp.email_field_mapping})}}]),i}();i.default=c},{"./base":2}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,a=(n=e("./base"))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(){function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l(this,d(i).call(this,e,e("#cf7k_webhook_integration_metabox")))).setElements(),t.setData(),t.bindEvents(),t.run(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,a["default"]),function(e,t,i){t&&r(e.prototype,t),i&&r(e,i)}(i,[{key:"setData",value:function(){this.data=this.$.extend(!0,this.data,{i18n:window.cf7k_admin,formFields:[],mergeFields:[],fieldMapping:[],formFieldsLoaded:!1})}},{key:"setElements",value:function(){this.el=this.$.extend(this.el,{$fieldMapping:this.el.$metabox.find('input[name="webhook[field_mapping]"]'),$addFieldMap:this.el.$metabox.find(".cf7k-cpt-metabox-webhook-field-mapping-add button"),$cf7Id:this.$('select[name="cf7_id"]')})}},{key:"bindEvents",value:function(){var t=this;this.el.$cf7Id.change(function(e){return t.createFieldMapping()}),this.el.$addFieldMap.click(function(e){return t.addFieldMap()}),this.el.$metabox.on("change",".cf7k-cpt-metabox-webhook-field-mapping-form-field",function(e){return t.onFieldMapChange(e,"form_field")}),this.el.$metabox.on("change",".cf7k-cpt-metabox-webhook-field-mapping-merge-field",function(e){return t.onFieldMapChange(e,"merge_field")}),this.el.$metabox.on("click",".cf7k-cpt-metabox-webhook-field-mapping-row-delete i",function(e){return t.deleteFieldMap(e)})}},{key:"run",value:function(){this.getFormFields()}},{key:"getFormFields",value:function(){var t=this,e=this.el.$cf7Id.val();e&&window.wp.ajax.post("cf7k_get_cf7_fields",{id:e}).done(function(e){t.data.formFieldsLoaded=!0,t.data.formFields=e||[],t.initFieldMapping(),t.el.$metabox.find(".cf7k-cpt-metabox-webhook-field-mapping-row").removeClass("hidden")})}},{key:"resetFieldMapping",value:function(){this.mergeFields=[],this.formFields=[],this.data.mergeFieldsLoaded=!1,this.data.formFieldsLoaded=!1,this.data.fieldMapping=[],this.el.$fieldMapping.val("[]"),this.el.$metabox.find(".cf7k-cpt-metabox-webhook-field-mapping-row").addClass("hidden"),this.$(".cf7k-cpt-metabox-webhook-field-mapping").html("")}},{key:"insertFormFields",value:function(e){var t="cf7k-cpt-metabox-webhook-field-mapping",i="",n=!0,a=!1,o=void 0;try{for(var r,l=this.data.formFields[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var d=r.value;i+='<option value="'.concat(d.name,'"> ').concat(d.name,"</option>")}}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}this.$(".".concat(t,' > div[data-id="').concat(e,'"]')).find(".".concat(t,"-form-field select")).append(i)}},{key:"addFieldMap",value:function(e){var t="cf7k-cpt-metabox-webhook-field-mapping",i=this.$("."+t),n=-1;if(e)n=e.id;else{var a=!0,o=!1,r=void 0;try{for(var l,d=this.data.fieldMapping[Symbol.iterator]();!(a=(l=d.next()).done);a=!0){var s=l.value;n<s.id&&(n=s.id)}}catch(e){o=!0,r=e}finally{try{a||null==d.return||d.return()}finally{if(o)throw r}}n+=1}var c='\n      <div class="'.concat(t,'-row" data-id="').concat(n,'">\n        <div class="').concat(t,'-form-field"><select><option value="">- None -</option></select></div>\n        <div class="').concat(t,'-merge-field"><input value=""></div>\n        <div class="').concat(t,'-row-delete"><i class="dashicons dashicons-trash"></i></div>\n      </div>');i.append(c),this.insertFormFields(n),this.data.fieldMapping.push(e||{id:n,merge_field:"",form_field:""}),this.el.$fieldMapping.val(JSON.stringify(this.data.fieldMapping))}},{key:"deleteFieldMap",value:function(e){var t=this.$(e.target).closest(".cf7k-cpt-metabox-webhook-field-mapping-row"),i=t.data("id");this.data.fieldMapping=_.without(this.data.fieldMapping,_.findWhere(this.data.fieldMapping,{id:i})),t.remove(),this.el.$fieldMapping.val(JSON.stringify(this.data.fieldMapping))}},{key:"onFieldMapChange",value:function(e,t){var i=this.$(e.target).closest(".cf7k-cpt-metabox-webhook-field-mapping-row").data("id");_.find(this.data.fieldMapping,{id:i})[t]=e.target.value,this.el.$fieldMapping.val(JSON.stringify(this.data.fieldMapping))}},{key:"initFieldMapping",value:function(){if(this.data.formFieldsLoaded){this.$(".cf7k-cpt-metabox-webhook-field-mapping-row i.cf7k-spin").addClass("hidden").siblings("*").removeClass("hidden");var e="cf7k-cpt-metabox-webhook-field-mapping",t=JSON.parse(this.el.$fieldMapping.val()||"[]"),i=!0,n=!1,a=void 0;try{for(var o,r=t[Symbol.iterator]();!(i=(o=r.next()).done);i=!0){var l=o.value;this.addFieldMap(l),this.$(".".concat(e,' > div[data-id="').concat(l.id,'"]')).find(".".concat(e,"-merge-field input")).val(l.merge_field),this.$(".".concat(e,' > div[data-id="').concat(l.id,'"]')).find(".".concat(e,"-form-field select")).val(l.form_field)}}catch(e){n=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(n)throw a}}}}}]),i}();i.default=c},{"./base":2}]},{},[1]);